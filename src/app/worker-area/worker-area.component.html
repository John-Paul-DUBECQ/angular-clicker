<div id="worker-area" *ngIf="workerSelected">
    <div class="left-part-worker-area">
        <div class="worker-name" [ngClass]="getLevelNameClass()">{{ workerSelected.name }}</div>
        <div class="worker-level">Level : {{ workerSelected.level }}</div>
    </div>
    <div class="center-part-worker-area">
        <div class="worker-productivity" *ngIf="!isClickWorker">{{ clicksPerSecond | number:'1.2-2' }}/s</div>
        <div class="worker-productivity" *ngIf="isClickWorker">+{{ (clickBonus + 1) | number:'1.2-2' }} dégâts/clic</div>
        <div
            #unlockRef
            class="next-worker-unlock"
            *ngIf="nextWorkerUnlocks.length"
            (mouseenter)="onUnlockMouseEnter()"
            (mouseleave)="onUnlockMouseLeave()"
        >
            Prochain palier
        </div>
    </div>
    <div class="worker-buy-button">
        <button class="btn btn-secondary" *ngIf="workerSelected.canBuyWorker" (click)="upgradeWorker()">Upgrade : {{ workerSelected.price }}</button>
        <button class="btn btn-secondary disabled" *ngIf="!workerSelected.canBuyWorker" disabled>Upgrade : {{ workerSelected.price }}</button>
    </div>
</div>

<!-- Popup style Cookie Clicker au survol (position: fixed pour sortir du overflow parent) -->
<div
    *ngIf="unlockPopupVisible && unlockPopupStyle && nextWorkerUnlocks.length"
    class="worker-unlock-popup worker-unlock-popup--fixed"
    [ngStyle]="unlockPopupStyle"
>
    <span class="worker-unlock-popup__tag">Prochains paliers (par niveau)</span>
    <ul class="worker-unlock-popup__list">
        <li *ngFor="let u of nextWorkerUnlocks" class="worker-unlock-popup__item">
            <div class="worker-unlock-popup__item-header">
                <img
                    *ngIf="u.imageUrl"
                    [src]="u.imageUrl"
                    [alt]=""
                    class="worker-unlock-popup__icon"
                />
                <span *ngIf="!u.imageUrl" class="worker-unlock-popup__icon-placeholder">{{ u.name?.charAt(0) || '?' }}</span>
                <span class="worker-unlock-popup__name">{{ u.name }}</span>
                <span class="worker-unlock-popup__level" *ngIf="u.levelRequired != null">Niv. {{ u.levelRequired }}</span>
            </div>
            <p class="worker-unlock-popup__description" [innerHTML]="u.description"></p>
        </li>
    </ul>
    <p class="worker-unlock-popup__cta">Monte en niveau pour débloquer.</p>
</div>
